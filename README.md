# Описание: 

## Общее
Приложение обслуживает файловое хранилище. Состоит из самого файлового хранилища (файловоая система) и БД (в данный момент используется СУБД SQLite), которая хранит информацию о файлах:

* Имя файла;
* Относительный путь внутри хранилища;
* Расширение файла;
* Дата создания файла;
* Дата последнего изменения файла;
* Размер файла;
* Комментарий к файлу.

## Запуск

Для запуска приложения требуется предварительная настройка файла - **app_config.yaml**, который находится в директории - **config**.
После настройки, приложение запускается через файл - **main.py**.

## Настрока и конфигурация

Файл конфигурации приложения состоит из следующих элементов:

* Корневой элемент **applications** -  в нем перечисляются все будущие экземпляры приложения;
* Элементы **app_1** и **app_2** - являются именами будущих экземпляров приложения, имена не обязательно должны быть вышеперечисленными и
    их кол-во может быть произвольным;
* Элемент **app_vars** - является блоком описания переменных приложения, переменные описанные здесь в дальнейшем будут доступны через экземпляр
    приложения в теле программы;
* Элемент **app_settings** - служит для описания настроек приложения таких как порт и хост;
* Элемент **db_settings** - служит для описания настроек БД. Тут есть один нюанс: если **db_type** имеет значение ***SQLite***, тогда требуется указать
    переменные **db_path** и **db_name**. Если **db_type** имеет значение ***PostgreSQL***, тогда требуется указать переменные **db_host**, **db_port**, **db_name**. В дополнение для корректного построения URL, требуется для каждого экземляра приложения использующего ***PostgreSQL*** указать переменные окружения с паролем и именем пользователя как: ***APP_NAME***_DB_PASSWORD и ***APP_NAME***_DB_USERNAME, где имя приложения должно соотвествовать имени приложения в файле конфигурации.

Также, файл конфигурации поддерживает переменные окружения, как значение для ключей через подстановку - **${ENV_VAR}**.

Для более подробного примера настройки см. файл конфигурации.

## Функционал

Из функционала реализовано:

* Загрузка файл в файловое хранилище - ссылка "Вставить" в меню;
* Вывод инфо обо всех файлах - ссылка "Главная" в меню, если файлов в БД нет, то страница будет пустой;
* Просмотр инфо об одном файле - ссылка "Информация о файле"в меню;
* Вывод инфо обо всех файлах, которые находятся в какой-либо части пути - ссылка "Поиск" в меню;
* Загрузка файла из хранилища - ссылка "Загрузить" в меню файла;
* Удаления файла из хранилища и удаления директории (если пустая) - ссылка "Удалить" в меню файла;
* Изменение файла - ссылка "Изменить" в меню файла;
* Синхронизация БД и файлового хранилища при старте приложения;
* Добавлен файл конфигурации приложения;
* Добавлен эндпоинт для синхронизации во время работы приложения.

## Docker и т.д.
* Добавлен Dockerfile для приложения;
* Для быстрого деплоя требуется заменить **your_repo** в Makefile на свой репозиторий.

# Будущие улучшения

Планируется добавить следующий функционал:
* Переезд с SQLite на PostgreSQL;
* Контейнерезация, Docker Compose для приложения и СУБД;
* Общий рефакторинг кода для лучшего соответствия PEP 8.
